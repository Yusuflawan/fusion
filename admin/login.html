<!DOCTYPE html>
<html lang="en">

<head>
 
  <base href="">

  <!-- begin::GXON Meta Basic -->
  <meta charset="utf-8">
 <!-- end::GXON Meta Basic -->

  <!-- begin::GXON Meta Social -->
  <!-- end::GXON Meta Social -->

  <!-- begin::GXON Meta Twitter -->
  <meta name="twitter:title" content="Login | Fusion HR Management Admin Dashboard">
 <!-- end::GXON Meta Twitter -->

  <!-- begin::GXON Website Page Title -->
  <title>Login | Fusion</title>
  <!-- end::GXON Website Page Title -->

  <!-- begin::GXON Mobile Specific -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- end::GXON Mobile Specific -->

  <!-- begin::GXON Favicon Tags -->
  <link rel="icon" type="image/png" href="assets/images/logo.jpeg">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/images/logo.jpeg">
  <!-- end::GXON Favicon Tags -->

  <!-- begin::GXON Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
  <!-- end::GXON Google Fonts -->

   

  <!-- begin::GXON Required Stylesheet -->
  <link rel="stylesheet" href="assets/libs/flaticon/css/all/all.css">
  <link rel="stylesheet" href="assets/libs/lucide/lucide.css">
  <link rel="stylesheet" href="assets/libs/fontawesome/css/all.min.css">
  <link rel="stylesheet" href="assets/libs/simplebar/simplebar.css">
  <link rel="stylesheet" href="assets/libs/node-waves/waves.css">
  <link rel="stylesheet" href="assets/libs/bootstrap-select/css/bootstrap-select.min.css">
  <!-- end::GXON Required Stylesheet -->

  <!-- begin::GXON CSS Stylesheet -->
  <link rel="stylesheet" href="assets/css/styles.css">
  <!-- end::GXON CSS Stylesheet -->

  <!-- begin::GXON Googletagmanager -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XWVQM68HHQ"></script>
  <script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-XWVQM68HHQ', {
			'cookie_flags': 'SameSite=None;Secure',
			'send_page_view': true
		});
	</script>
  <!-- end::GXON Googletagmanager -->

</head>

<body>
  <div class="page-layout">

    <div class="auth-frame-wrapper">
      <div class="row g-0 h-100">
        <div class="col-lg-6">
          <div class="auth-frame" style="background-image: url(assets/images/auth/auth-frame.webp);">
            <div class="clearfix">
              <div class="auth-content">
                <h1 class="display-6 text-white fw-bold">Welcome Back!</h1>
                <p>Sign in to access your Fusion account</p>
              </div>
              <div class="auth-imgs position-relative">
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-6 align-self-center">
          <div class="p-4 p-sm-5 maxw-450px m-auto">
            <div class="mb-4 text-center w-80">
              <a href="admin/login.html" aria-label="GXON logo">
                <img class="visible-light w-100" src="assets/images/logo.jpeg" alt="GXON logo">
                <img class="visible-dark w-100" src="assets/images/logo.jpeg" alt="GXON logo">
              </a>
            </div>
            <div class="text-center mb-5">
              <h5 class="mb-1">Welcome back</h5>
              <p>Sign in to access your secure admin dashboard.</p>
              <span id="message"></span>
            </div>
            <form id="login-form">
              <div class="mb-4">
                <label class="form-label" for="email">Email Address</label>
                <input type="email" id="email" class="form-control" id="loginEmail" placeholder="user@example.com">
              </div>
              <div class="mb-4">
                <label class="form-label" for="password">Password</label>
                <input type="password" id="password" class="form-control" id="loginPassword" placeholder="********">
              </div>
              <div class="mb-4">
                <div class="d-flex justify-content-between">
                  <div class="form-check mb-0">
                    <input class="form-check-input" type="checkbox" id="rememberMe">
                    <label class="form-check-label" for="rememberMe"> Remember Me </label>
                  </div>
                  <a href="forgot-password-basic.html">Forgot Password?</a>
                </div>
              </div>
              <div class="mb-3">
                <button type="submit" value="Submit" class="btn btn-primary waves-effect waves-light w-100">Login</button>
              </div>
            </p>
          </form>
          <div class="mb-5">
            <button onclick="goToHomePage()" type="button" class="btn btn-primary waves-effect waves-light w-100">Go to Homepage</button>
          </div>
          </div>
        </div>
      </div>
    </div>

  </div>
  <!-- begin::GXON Page Scripts -->
  <!-- <script src="assets/libs/global/global.min.js"></script> -->
  <script src="assets/js/appSettings.js"></script>
  <script src="assets/js/main.js"></script>
  <script src="assets/js/main.js"></script>

  <!-- <script src="assets/js/my-js/login.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
  function goToHomePage(){
    window.location.replace("/index.html");
  }

function displayMessage(message, color) {
    const msg = document.getElementById("message");
    if (msg) {
        msg.textContent = message;
        msg.style.color = color;
        setTimeout(() => {
            msg.textContent = "";
        }, 3000);
    }
}

const baseUrl = "https://arafatfootballacademy.com/fusion/backend";

(async () => {
    const token = localStorage.getItem("token");
    if (token) {
        try {
            await axios.get(`${baseUrl}/profile`, {
                headers: { Authorization: `Bearer ${token}` },
            });

            window.location.replace("dashboard.html");
        } catch {
            localStorage.removeItem("token");
            localStorage.removeItem("user");
        }
    }
})();

// Login form submit
document.getElementById("login-form").addEventListener("submit", async (e) => {
    e.preventDefault();

    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();

    try {
        const loginRes = await axios.post(`${baseUrl}/admin/auth/login`, {
            email,
            password,
        });

        if (loginRes.data.token) {
            const token = loginRes.data.token;
            localStorage.setItem("token", token);

            displayMessage(loginRes.data.message || "Login successful!", "green");

            setTimeout(() => {
                window.location.replace("dashboard.html");
            }, 1000);
        } else {
            displayMessage("No token received.", "red");
        }
    } catch (err) {
        console.error(err);
        displayMessage("Please check your credentials.", "red");
    }
});
</script>

  <!-- end::GXON Page Scripts -->
</body>

</html>