<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- begin::GXON Meta Basic -->
    <meta charset="utf-8" />

    <title>Fusion</title>
    <link rel="icon" type="image/png" href="assets/images/logo.jpeg" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- begin::GXON Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap"
      rel="stylesheet"
    />
    <!-- end::GXON Google Fonts -->

    <!-- begin::GXON Required Stylesheet -->
    <link rel="stylesheet" href="assets/libs/flaticon/css/all/all.css" />
    <link rel="stylesheet" href="assets/libs/lucide/lucide.css" />
    <link rel="stylesheet" href="assets/libs/fontawesome/css/all.min.css" />
    <link rel="stylesheet" href="assets/libs/simplebar/simplebar.css" />
    <link rel="stylesheet" href="assets/libs/node-waves/waves.css" />
    <link
      rel="stylesheet"
      href="assets/libs/bootstrap-select/css/bootstrap-select.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <!-- end::GXON Required Stylesheet -->

    <!-- begin::GXON CSS Stylesheet -->
    <link rel="stylesheet" href="assets/libs/datatables/datatables.min.css" />
    <link rel="stylesheet" href="assets/libs/flatpickr/flatpickr.min.css" />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <!-- end::GXON CSS Stylesheet -->

    <!-- begin::GXON Googletagmanager -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-XWVQM68HHQ"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-XWVQM68HHQ", {
        cookie_flags: "SameSite=None;Secure",
        send_page_view: true,
      });
    </script>
    <!-- Include Choices.js CSS & JS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
    <!-- end::GXON Googletagmanager -->
  </head>

  <body>
    <div class="page-layout">
      <!-- begin::GXON Page Header -->
      <header class="app-header">
        <div class="app-header-inner" id="header"></div>
      </header>
      <!-- end::GXON Page Header -->

      <div
        class="modal fade"
        id="searchResultsModal"
        tabindex="-1"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header py-1 px-3">
              <form
                class="d-flex align-items-center position-relative w-100"
                action="leave.html#"
              >
                <button
                  type="button"
                  class="btn btn-sm border-0 position-absolute start-0 p-0 text-sm"
                >
                  <i class="fi fi-rr-search"></i>
                </button>
                <input
                  type="text"
                  class="form-control form-control-lg ps-4 border-0 shadow-none"
                  id="searchInput"
                  placeholder="Search anything's"
                />
              </form>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body pb-2" style="height: 300px" data-simplebar>
              <div id="recentlyResults">
                <span
                  class="text-uppercase text-2xs fw-semibold text-muted d-block mb-2"
                  >Recently Searched:</span
                >
                <ul class="list-inline search-list">
                  <li>
                    <a class="search-item" href="index.html">
                      <i class="fi fi-rr-apps"></i> Dashboard
                    </a>
                  </li>
                  <li>
                    <a class="search-item" href="user.html">
                      <i class="fi fi-rr-comment"></i>User Management
                    </a>
                  </li>
                  <li>
                    <a class="search-item" href="roles.html">
                      <i class="fi fi-rr-calendar"></i>Roles & Access control
                    </a>
                  </li>
                  <li>
                    <a class="search-item" href="PTSP.html">
                      <i class="fi fi-rr-chart-pie-alt"></i> ptsp onboarding
                    </a>
                  </li>
                  <li>
                    <a class="search-item" href="data.html">
                      <i class="fi fi-rr-file"></i>data ingestion monitor
                    </a>
                  </li>
                  <li>
                    <a class="search-item" href="audit.html">
                      <i class="fi fi-rr-envelope"></i> audit log
                    </a>
                  </li>
                  <li>
                    <a class="search-item" href="transaction.html">
                      <i class="fi fi-rr-envelope"></i>Tax Transaction Config
                    </a>
                  </li>
                   <li>
                    <a class="search-item" href="taxconfig.html">
                        <i class="fi fi-rr-envelope"></i>Tax Configuration
                    </a>
                  </li>
                </ul>
              </div>
              <div id="searchContainer"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- begin::GXON Sidebar Menu -->
      <div id="sidebsr"></div>
      <!-- end::GXON Sidebar Menu -->

      <!-- begin::GXON Sidebar right -->
      <div class="app-sidebar-end"></div>
      <!-- end::GXON Sidebar right -->

      <main class="app-wrapper">
        <div class="container">
          <div
            class="app-page-head d-flex flex-wrap gap-3 align-items-center justify-content-between"
          >
            <div class="clearfix">
              <h1 class="app-page-title">Transaction Settings</h1>
            </div>

            <!-- Add Tier button -->
            <!-- Add Tier Button -->
            <!-- <div>
              <button
                class="btn btn-primary rounded-pill"
                data-bs-toggle="modal"
                data-bs-target="#addTierModal"
              >
                <i class="bi bi-plus-lg me-1"></i> Add Tier
              </button>
            </div> -->

            <!-- Modal -->
            <!-- <div class="modal fade" id="addTierModal" tabindex="-1" aria-labelledby="addTierModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content rounded-4">
      <div class="modal-header">
        <h4 class="modal-title fw-bold" id="addTierModalLabel">Add New Commission Tier</h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal"
          aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="text-muted small mb-4">
          Create a new commission tier with specific rates and amount ranges.
        </p>
        <form id="tierForm">
          <div class="col-md-6">
              <label class="form-label text-dark">Select State</label>
              <select id="stateSelect" class="form-select" required>
                <option value="">-- Select State --</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label text-dark">Select LGA(s)</label>
              <select id="lgaSelect" class="form-select" multiple required>
                <option value="">-- Select LGA --</option>
              </select>
            </div>
            <div class="col-md-12">
              <label class="form-label text-dark">Select Business Type(s)</label>
              <select id="businessTypeSelect" class="form-select" multiple required>
                <option value="">-- Select Business Type --</option>
              </select>
            </div>
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label text-dark">Tier Name</label>
              <input type="text" name="name" class="form-control" placeholder="e.g., Tier 5" required />
            </div>
            <div class="col-md-6">
              <label class="form-label text-dark">Commission Rate (%)</label>
              <input type="number" step="0.01" name="rate_value" class="form-control" value="0.0" required />
            </div>
            <div class="col-md-6">
              <label class="form-label text-dark">Minimum Amount (₦)</label>
              <input type="number" name="min_amount" class="form-control" value="0" required />
            </div>
            <div class="col-md-6">
              <label class="form-label text-dark">Maximum Amount (₦)</label>
              <input type="number" name="max_amount" class="form-control"
                placeholder="Leave empty for no limit" />
            </div>
            <div class="col-md-12">
              <label class="form-label text-dark">Flat Fee (₦)</label>
              <input type="number" name="flat_fee" class="form-control" value="0" />
            </div>
            <div class="col-md-12">
              <label class="form-label text-dark">Description</label>
              <textarea name="description" class="form-control" rows="3"
                placeholder="Describe this tier's purpose and scope"></textarea>
            </div>
          </div>
        </form>
        <div id="formMessage" class="mt-3"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
        <button type="button" id="createTierBtn" class="btn btn-primary">Create Tier</button>
      </div>
    </div>
  </div>
</div> -->

            <div
              class="modal fade"
              id="addTierModal"
              tabindex="-1"
              aria-labelledby="addTierModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-lg">
                <div class="modal-content rounded-4 border-0 shadow-lg">
                  <!-- Header -->
                  <div class="modal-header bg-primary text-white rounded-top-4">
                    <h4 class="modal-title fw-bold" id="addTierModalLabel">
                      Add New Commission Tier
                    </h4>
                    <button
                      type="button"
                      class="btn-close btn-close-white"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    ></button>
                  </div>

                  <div class="modal-body bg-light">
                    <p class="text-muted small mb-4">
                      Create a new commission tier with specific rates, amounts,
                      and applicable locations.
                    </p>

                    <form id="tierForm" class="row g-3">
                      <div class="col-md-6">
                        <label class="form-label fw-semibold"
                          >Select Tier</label
                        >
                        <select
                          name="tier_type"
                          id="tierType"
                          class="form-select"
                          required
                        >
                          <option value="">-- Choose Tier --</option>
                          <option value="1">Tier One</option>
                          <option value="2">Tier Two</option>
                          <option value="3">Tier Three</option>
                          <option value="4">Tier Four</option>
                        </select>
                      </div>

                      <div class="col-md-6">
                        <label class="form-label fw-semibold"
                          >Select State</label
                        >
                        <select id="stateSelect" class="form-select" required>
                          <option value="">-- Select State --</option>
                        </select>
                      </div>

                      <div class="col-md-12">
                        <label class="form-label fw-semibold"
                          >Select LGA(s)</label
                        >
                        <select
                          id="lgaSelect"
                          class="form-select"
                          multiple
                          required
                        ></select>
                      </div>

                      <div class="col-md-12">
                        <label class="form-label fw-semibold"
                          >Select Business Type(s)</label
                        >
                        <select
                          id="businessTypeSelect"
                          class="form-select"
                          multiple
                          required
                        ></select>
                      </div>

                      <div class="col-md-6">
                        <label class="form-label fw-semibold">Tier Name</label>
                        <input
                          type="text"
                          name="name"
                          class="form-control"
                          placeholder="e.g., LGA Levy Tier"
                          required
                        />
                      </div>

                      <div class="col-md-6">
                        <label class="form-label fw-semibold">Rate Type</label>
                        <select
                          name="rate_type"
                          id="rateType"
                          class="form-select"
                          required
                        >
                          <option value="">-- Choose Rate Type --</option>
                          <option value="percentage">Percentage</option>
                          <option value="flat">Flat</option>
                        </select>
                      </div>

                      <div class="col-md-6">
                        <label class="form-label fw-semibold">Rate Value</label>
                        <input
                          type="number"
                          step="0.01"
                          name="rate_value"
                          class="form-control"
                          value="0.0"
                          required
                        />
                      </div>

                      <div class="col-md-6">
                        <label class="form-label fw-semibold"
                          >Minimum Amount (₦)</label
                        >
                        <input
                          type="number"
                          name="min_amount"
                          class="form-control"
                          value="0"
                          required
                        />
                      </div>
                      <div class="col-md-6">
                        <label class="form-label fw-semibold"
                          >Maximum Amount (₦)</label
                        >
                        <input
                          type="number"
                          name="max_amount"
                          class="form-control"
                          placeholder="Leave empty for no limit"
                        />
                      </div>

                      <div class="col-md-6">
                        <label class="form-label fw-semibold"
                          >Flat Fee (₦)</label
                        >
                        <input
                          type="number"
                          name="flat_fee"
                          class="form-control"
                          value="0"
                        />
                      </div>

                      <div class="col-md-6">
                        <label class="form-label fw-semibold">Frequency</label>
                        <select
                          name="frequency"
                          id="frequency"
                          class="form-select"
                          required
                        >
                          <option value="">-- Select Frequency --</option>
                          <option value="Daily">Daily</option>
                          <option value="Weekly">Weekly</option>
                          <option value="Monthly">Monthly</option>
                          <option value="Quarterly">Quarterly</option>
                          <option value="Yearly">Yearly</option>
                        </select>
                      </div>

                      <div class="col-md-12">
                        <label class="form-label fw-semibold"
                          >Description</label
                        >
                        <textarea
                          name="description"
                          class="form-control"
                          rows="3"
                          placeholder="Describe this tier's purpose and scope"
                        ></textarea>
                      </div>
                    </form>
                    <div id="formMessage" class="mt-3"></div>
                  </div>

                  <div class="modal-footer bg-light">
                    <button
                      type="button"
                      class="btn btn-light border"
                      data-bs-dismiss="modal"
                    >
                      Cancel
                    </button>
                    <button
                      type="button"
                      id="createTierBtn"
                      class="btn btn-primary"
                    >
                      Create Tier
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <script>
              // tier one hide business input
              // tier two hide lga input field
              // tier three display both of them
              // tier four hide business input and lga input

              let lgaChoices, businessChoices;

              document.addEventListener("DOMContentLoaded", () => {
                lgaChoices = new Choices("#lgaSelect", {
                  removeItemButton: true,
                  searchPlaceholderValue: "Search LGAs...",
                  noResultsText: "No LGAs found",
                });

                businessChoices = new Choices("#businessTypeSelect", {
                  removeItemButton: true,
                  searchPlaceholderValue: "Search Business Types...",
                  noResultsText: "No Business Types found",
                });

                const tierType = document.getElementById("tierType");
                const lgaField = document
                  .getElementById("lgaSelect")
                  .closest(".col-md-12");
                const businessField = document
                  .getElementById("businessTypeSelect")
                  .closest(".col-md-12");

                tierType.addEventListener("change", () => {
                  const val = tierType.value;
                  if (val === "1") {
                    businessField.style.display = "none";
                    lgaField.style.display = "block";
                  } else if (val === "2") {
                    lgaField.style.display = "none";
                    businessField.style.display = "block";
                  } else if (val === "3") {
                    lgaField.style.display = "block";
                    businessField.style.display = "block";
                  } else if (val === "4") {
                    lgaField.style.display = "none";
                    businessField.style.display = "none";
                  } else {
                    lgaField.style.display = "block";
                    businessField.style.display = "block";
                  }
                });
              });

              document
                .getElementById("addTierModal")
                .addEventListener("shown.bs.modal", async () => {
                  const stateSelect = document.getElementById("stateSelect");
                  stateSelect.innerHTML = `<option value="">Loading states...</option>`;
                  try {
                    const res = await fetch(
                      "https://arafatfootballacademy.com/fusion/backend/states"
                    );
                    const states = await res.json();
                    stateSelect.innerHTML = `<option value="">-- Select State --</option>`;
                    states.data.forEach((s) => {
                      stateSelect.innerHTML += `<option value="${s.id}">${s.state}</option>`;
                    });
                  } catch (err) {
                    stateSelect.innerHTML = `<option value="">Error loading states</option>`;
                  }
                });

              document
                .getElementById("stateSelect")
                .addEventListener("change", async (e) => {
                  try {
                    const res = await fetch(
                      `https://arafatfootballacademy.com/fusion/backend/state/${e.target.value}/lgas`
                    );
                    const lgas = await res.json();
                    lgaChoices.clearStore();
                    lgaChoices.setChoices(
                      lgas.data.map((lga) => ({
                        value: lga.id,
                        label: lga.lga_name,
                      })),
                      "value",
                      "label",
                      true
                    );
                  } catch {
                    lgaChoices.clearStore();
                  }
                });

              document
                .getElementById("lgaSelect")
                .addEventListener("change", async () => {
                  try {
                    const res = await fetch(
                      `https://arafatfootballacademy.com/fusion/backend/business-types`
                    );
                    const types = await res.json();
                    businessChoices.clearStore();
                    businessChoices.setChoices(
                      types.data.map((bt) => ({
                        value: bt.id,
                        label: bt.name,
                      })),
                      "value",
                      "label",
                      true
                    );
                  } catch {
                    businessChoices.clearStore();
                  }
                });

              document
                .getElementById("createTierBtn")
                .addEventListener("click", async () => {
                  const form = document.getElementById("tierForm");
                  const formMessage = document.getElementById("formMessage");

                  const state_id = document.getElementById("stateSelect").value;
                  const tier_type = parseInt(
                    document.getElementById("tierType").value
                  );
                  const lga_ids = Array.from(
                    document.getElementById("lgaSelect").selectedOptions
                  ).map((opt) => parseInt(opt.value));
                  const business_type_ids = Array.from(
                    document.getElementById("businessTypeSelect")
                      .selectedOptions
                  ).map((opt) => parseInt(opt.value));

                  const name = form
                    .querySelector("input[name='name']")
                    .value.trim();
                  const rate_value =
                    parseFloat(
                      form.querySelector("input[name='rate_value']").value
                    ) || 0;
                  const min_amount =
                    parseFloat(
                      form.querySelector("input[name='min_amount']").value
                    ) || 0;
                  const max_amount =
                    parseFloat(
                      form.querySelector("input[name='max_amount']").value
                    ) || 0;
                  const flat_fee =
                    parseFloat(
                      form.querySelector("input[name='flat_fee']").value
                    ) || 0;
                  const description = form
                    .querySelector("textarea[name='description']")
                    .value.trim();

                  const rate_type = document.getElementById("rateType").value;
                  const frequency = document.getElementById("frequency").value;

                  const payload = {
                    name,
                    description,
                    tier_type,
                    rate_type,
                    rate_value: rate_value  || "",
                    min_amount,
                    max_amount,
                    frequency,
                    state_id,
                    lga_ids: lga_ids.length > 0 ? lga_ids : [],
                    business_type_ids:
                      business_type_ids.length > 0 ? business_type_ids : [],
                    flat_fee: flat_fee || "",
                  };

                  try {
                    formMessage.innerHTML = `<div class="alert alert-info">Submitting, please wait...</div>`;

                    const response = await fetch(
                      "https://arafatfootballacademy.com/fusion/backend/advanced-tiers",
                      {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify(payload),
                      }
                    );

                    const result = await response.json();

                    if (!response.ok) {
                      formMessage.innerHTML = `<div class="alert alert-danger">Failed: ${
                        result.message || "Unknown error"
                      }</div>`;
                    } else {
                      formMessage.innerHTML = `<div class="alert alert-success">Tier created successfully! ${
                        result.message || ""
                      }</div>`;
                      form.reset();
                    }
                  } catch (error) {
                    formMessage.innerHTML = `<div class="alert alert-danger">Error: ${error.message}</div>`;
                  }
                });
            </script>

            <!-- <script>
const apiBase = "https://arafatfootballacademy.com/fusion/backend";

document.getElementById("addTierModal").addEventListener("shown.bs.modal", async () => {
  const stateSelect = document.getElementById("stateSelect");
  stateSelect.innerHTML = `<option value="">Loading...</option>`;
  try {
    const res = await fetch(`${apiBase}/states`);
    const states = await res.json();
    stateSelect.innerHTML = `<option value="">-- Select State --</option>`;
    states.data.forEach(state => {
      stateSelect.innerHTML += `<option value="${state.id}">${state.state}</option>`;
    });
  } catch (err) {
    stateSelect.innerHTML = `<option value="">Error loading states</option>`;
  }
});

document.getElementById("stateSelect").addEventListener("change", async (e) => {
  const stateId = e.target.value;
  const lgaSelect = document.getElementById("lgaSelect");
  lgaSelect.innerHTML = `<option value="">Loading LGAs...</option>`;
  try {
    const res = await fetch(`${apiBase}/state/${stateId}/lgas`);
    const lgas = await res.json();
    lgaSelect.innerHTML = "";
    lgas.data.forEach(lga => {
      lgaSelect.innerHTML += `<option value="${lga.id}">${lga.lga_name}</option>`;
    });
  } catch (err) {
    lgaSelect.innerHTML = `<option value="">Error loading LGAs</option>`;
  }
});

document.getElementById("lgaSelect").addEventListener("change", async () => {
  const businessTypeSelect = document.getElementById("businessTypeSelect");
  businessTypeSelect.innerHTML = `<option value="">Loading...</option>`;
  try {
    const res = await fetch(`${apiBase}/business-types`);
    const types = await res.json();
    businessTypeSelect.innerHTML = "";
    types.data.forEach(bt => {
      businessTypeSelect.innerHTML += `<option value="${bt.id}">${bt.name}</option>`;
    });
  } catch (err) {
    businessTypeSelect.innerHTML = `<option value="">Error loading business types</option>`;
  }
});

// Submit Form
document.getElementById("createTierBtn").addEventListener("click", async () => {
  const form = document.getElementById("tierForm");
  const msgBox = document.getElementById("formMessage");

  // Gather Data
  const payload = {
    name: form.name.value,
    description: form.description.value,
    tier_type: 1,
    rate_type: "percentage",
    rate_value: parseFloat(form.rate_value.value),
    min_amount: parseFloat(form.min_amount.value),
    max_amount: form.max_amount.value ? parseFloat(form.max_amount.value) : null,
    frequency: "Monthly",
    business_type_ids: Array.from(document.getElementById("businessTypeSelect").selectedOptions).map(o => parseInt(o.value)),
    lga_ids: Array.from(document.getElementById("lgaSelect").selectedOptions).map(o => parseInt(o.value))
  };

  msgBox.innerHTML = `<div class="text-primary">Submitting...</div>`;

  try {
    const res = await fetch(`${apiBase}/tiers`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });
    const result = await res.json();

    if (res.ok) {
      msgBox.innerHTML = `<div class="alert alert-success">Tier created successfully!</div>`;
      form.reset();
      document.getElementById("businessTypeSelect").innerHTML = "";
      document.getElementById("lgaSelect").innerHTML = "";
    } else {
      msgBox.innerHTML = `<div class="alert alert-danger">Error: ${result.message || "Failed to create tier"}</div>`;
    }
  } catch (err) {
    msgBox.innerHTML = `<div class="alert alert-danger">Request failed. Try again.</div>`;
  }
});
</script>
 -->
          </div>

          <div class="container my-4">
            <!-- Top Stats Cards -->
            <div class="row g-3 mb-4">
              <div class="col-md-3">
                <div class="card shadow-sm rounded-3 h-100">
                  <div
                    class="card-body d-flex justify-content-between align-items-start"
                  >
                    <!-- Left side text -->
                    <div>
                      <p class="text-dark small mb-3">Active Tiers</p>
                      <h3 class="fw-bold mb-0">4</h3>
                      <p class="text-muted small">Currently configured</p>
                    </div>

                    <!-- Right side icon -->
                    <div>
                      <i class="bi bi-graph-up-arrow text-success fs-4"></i>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-3">
                <div class="card shadow-sm rounded-3 h-100">
                  <div
                    class="card-body d-flex justify-content-between align-items-start"
                  >
                    <!-- Left side text -->
                    <div>
                      <p class="text-dark small mb-3">Average Rate</p>
                      <h3 class="fw-bold mb-0">3.3%</h3>
                      <p class="text-muted small">Across all tiers</p>
                    </div>

                    <!-- Right side icon (blue) -->
                    <div>
                      <i
                        class="bi bi-arrow-up-right-circle text-primary fs-4"
                      ></i>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-3">
                <div class="card shadow-sm rounded-3 h-100">
                  <div
                    class="card-body d-flex justify-content-between align-items-start"
                  >
                    <!-- Left side text -->
                    <div>
                      <p class="text-dark small mb-3">Max Coverage</p>
                      <h3 class="fw-bold mb-0">Unlimited</h3>
                      <p class="text-muted small">Transaction coverage</p>
                    </div>

                    <!-- Right side icon (purple) -->
                    <div>
                      <i class="bi bi-infinity fs-4" style="color: purple"></i>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-3">
                <div class="card shadow-sm rounded-3 h-100">
                  <div
                    class="card-body d-flex justify-content-between align-items-start"
                  >
                    <!-- Left side text -->
                    <div>
                      <p class="text-dark small mb-3">Last Updated</p>
                      <h3 class="fw-bold mb-0">Jan 1</h3>
                      <p class="text-muted small">2024</p>
                    </div>

                    <!-- Right side icon (time/clock) -->
                    <div>
                      <i class="bi bi-clock-history fs-4 text-danger"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Commission Tier Structure -->
            <div class="card shadow-sm rounded-3">
              <div class="card-body">
                <h5 class="card-title mb-1 fw-bold">
                  Commission Tier Structure
                </h5>
                <p class="text-muted small mb-3">
                  Configure tax calculation tiers and rates
                </p>

                <!-- Table -->
                <div class="table-responsive">
                  <table class="table align-middle" id="tiersTable">
                    <thead class="table-light">
                      <tr>
                        <th>Tier</th>
                        <th>Amount Range</th>
                        <th>Rate (%/₦)</th>
                        <th>Flat Fee (₦)</th>
                        <th>Description</th>
                        <th>Status</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody id="tiersTableBody">
                    </tbody>
                  </table>
                </div>
                <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

                <script>
                  async function loadTiers() {
                    try {
                      const response = await axios.get(
                        "https://arafatfootballacademy.com/fusion/backend/tiers"
                      );
                      const tiers = response.data.data;

                      const tableBody =
                        document.getElementById("tiersTableBody");
                      tableBody.innerHTML = "";

                      tiers.forEach((tier, index) => {
                        const min = parseFloat(
                          tier.min_amount
                        ).toLocaleString();
                        const max =
                          parseFloat(tier.max_amount) === 0
                            ? "No Limit"
                            : parseFloat(tier.max_amount).toLocaleString();
                        const range = `₦${min} - ₦${max}`;

                        const row = `
          <tr>
            <td>${
              tier.name
            }</td>
            <td>${range}</td>
            <td>${tier.rate_type === "percentage" 
   ? tier.rate_value + "%" 
   : "₦" + parseFloat(tier.rate_value).toLocaleString()}</td>
            <td>₦${tier.rate_value}</td>
            <td>${tier.description}</td>
            <td>
              <span class="badge bg-${
                tier.is_active === 1 ? "dark" : "secondary"
              } rounded-pill">
                ${tier.is_active === 1 ? "Active" : "In active"}
              </span>
            </td>
            <td>
              <button class="btn btn-sm btn-outline-primary me-1">
                <i class="bi bi-pencil"></i>
              </button>
              <button class="btn btn-sm btn-success me-1">Test</button>
              <button class="btn btn-sm btn-danger">
                <i class="bi bi-trash"></i>
              </button>
            </td>
          </tr>
        `;
                        tableBody.innerHTML += row;
                      });
                    } catch (error) {
                      console.error("Error fetching tiers:", error);
                    }
                  }

                  document.addEventListener("DOMContentLoaded", loadTiers);
                </script>
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- begin::GXON Footer -->
      <footer class="footer-wrapper bg-body">
        <div class="container">
          <div class="row g-2">
            <div class="col-lg-6 col-md-7 text-center text-md-start">
              <p class="mb-0">
                © <span class="currentYear">2025</a>.
              </p>
            </div>
          </div>
        </div>
      </footer>
      <!-- end::GXON Footer -->
    </div>

    <!-- begin::GXON Page Scripts -->
    <script src="assets/js/header.js"></script>
    <!-- <script src="assets/libs/global/global.min.js"></script> -->
    <script src="assets/libs/chartjs/chart.js"></script>
    <script src="assets/libs/apexcharts/apexcharts.min.js"></script>
    <script src="assets/libs/datatables/datatables.min.js"></script>
    <script src="assets/libs/flatpickr/flatpickr.min.js"></script>
    <script src="assets/js/flatpickr.js"></script>
    <script src="assets/js/dashboard.js"></script>
    <script src="assets/js/appSettings.js"></script>
    <script src="assets/js/main.js"></script>
    <!-- <script src="assets/js/my-js/transaction-settings.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- end::GXON Page Scripts -->
  </body>
</html>
